<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Task Manager">
    <meta name="description" content="Hierarchical task manager with time tracking and cross-device sync">
    
    <title>Hierarchical Task Manager</title>
    
    <!-- Favicon as data URL -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%232563eb' width='100' height='100' rx='20'/><text x='50' y='70' font-size='60' text-anchor='middle' fill='white'>‚úì</text></svg>">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect fill='%232563eb' width='180' height='180' rx='40'/><text x='90' y='130' font-size='100' text-anchor='middle' fill='white'>‚úì</text></svg>">
    
    <link rel="manifest" href="#" id="manifest-placeholder">
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==================== FIREBASE CONFIG ====================
        // üî• REPLACE THIS WITH YOUR FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyBtEdPG8JSHVmgLPA3TAXPImBDn-gwnHgI",
			authDomain: "claude-task-85dcc.firebaseapp.com",
			databaseURL: "https://claude-task-85dcc-default-rtdb.firebaseio.com",
			projectId: "claude-task-85dcc",
			storageBucket: "claude-task-85dcc.firebasestorage.app",
			messagingSenderId: "597445015843",
			appId: "1:597445015843:web:9f175f11fe678128aef496"
        };

        // Check if Firebase is configured
        const isFirebaseConfigured = firebaseConfig.apiKey !== "YOUR_API_KEY_HERE";

        // Initialize Firebase only if configured
        let database = null;
        if (isFirebaseConfigured) {
            try {
                firebase.initializeApp(firebaseConfig);
                database = firebase.database();
                console.log('üî• Firebase initialized successfully');
            } catch (error) {
                console.error('‚ùå Firebase initialization error:', error);
            }
        } else {
            console.warn('‚ö†Ô∏è Firebase not configured - using localStorage only');
        }

        // ==================== ICONS ====================
        const ChevronRight = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );

        const ChevronDown = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        );

        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Trash2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Clock = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Save = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                <polyline points="7 3 7 8 15 8"></polyline>
            </svg>
        );

        const Download = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const Cloud = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
            </svg>
        );

        const CloudOff = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
            </svg>
        );

        // ==================== MAIN COMPONENT ====================
        const HierarchicalTaskManager = () => {
            const defaultTasks = [
                {
                    id: 1,
                    text: 'Project Alpha',
                    timeMinutes: 0,
                    level: 0,
                    collapsed: false,
                    children: [
                        {
                            id: 2,
                            text: 'Planning Phase',
                            timeMinutes: 120,
                            level: 1,
                            collapsed: false,
                            children: [
                                { id: 3, text: 'Requirements gathering', timeMinutes: 60, level: 2, collapsed: false, children: [] },
                                { id: 4, text: 'Design mockups', timeMinutes: 60, level: 2, collapsed: false, children: [] }
                            ]
                        },
                        {
                            id: 5,
                            text: 'Development',
                            timeMinutes: 0,
                            level: 1,
                            collapsed: false,
                            children: [
                                { id: 6, text: 'Frontend', timeMinutes: 180, level: 2, collapsed: false, children: [] },
                                { id: 7, text: 'Backend', timeMinutes: 240, level: 2, collapsed: false, children: [] }
                            ]
                        }
                    ]
                }
            ];

            const [tasks, setTasks] = useState(defaultTasks);
            const [nextId, setNextId] = useState(8);
            const [saveNotification, setSaveNotification] = useState(false);
            const [installPrompt, setInstallPrompt] = useState(null);
            const [isInstalled, setIsInstalled] = useState(false);
            const [syncStatus, setSyncStatus] = useState('offline'); // 'syncing', 'synced', 'offline', 'error'
            const [isLoading, setIsLoading] = useState(true);
            const isSyncing = useRef(false);

            // ==================== FIREBASE FUNCTIONS ====================
            
            // Load data from Firebase
            const loadFromFirebase = async () => {
                if (!database) {
                    console.log('üìÇ Firebase not available, using defaults');
                    setIsLoading(false);
                    return;
                }

                try {
                    setSyncStatus('syncing');
                    const snapshot = await database.ref('tasks').once('value');
                    const data = snapshot.val();
                    
                    if (data && data.tasks && Array.isArray(data.tasks)) {
                        console.log('‚úÖ Loaded', data.tasks.length, 'tasks from Firebase');
                        setTasks(data.tasks);
                        setNextId(data.nextId || 8);
                    } else {
                        console.log('üìù No data in Firebase, using defaults');
                        // Save defaults to Firebase
                        await saveToFirebase(defaultTasks, 8);
                    }
                    setSyncStatus('synced');
                } catch (error) {
                    console.error('‚ùå Error loading from Firebase:', error);
                    setSyncStatus('error');
                } finally {
                    setIsLoading(false);
                }
            };

            // Save data to Firebase
            const saveToFirebase = async (tasksData, nextIdData) => {
                if (!database || isSyncing.current) return;

                try {
                    isSyncing.current = true;
                    setSyncStatus('syncing');
                    
                    await database.ref('tasks').set({
                        tasks: tasksData,
                        nextId: nextIdData,
                        lastModified: Date.now()
                    });
                    
                    console.log('üíæ Saved to Firebase:', tasksData.length, 'tasks');
                    setSyncStatus('synced');
                    
                    // Show save notification
                    setSaveNotification(true);
                    setTimeout(() => setSaveNotification(false), 2000);
                } catch (error) {
                    console.error('‚ùå Error saving to Firebase:', error);
                    setSyncStatus('error');
                } finally {
                    isSyncing.current = false;
                }
            };

            // Listen for real-time updates
            useEffect(() => {
                if (!database) return;

                const tasksRef = database.ref('tasks');
                
                const handleUpdate = (snapshot) => {
                    const data = snapshot.val();
                    if (data && data.tasks && !isSyncing.current) {
                        console.log('üîÑ Real-time update received');
                        setTasks(data.tasks);
                        setNextId(data.nextId || 8);
                        setSyncStatus('synced');
                    }
                };

                tasksRef.on('value', handleUpdate);

                return () => tasksRef.off('value', handleUpdate);
            }, []);

            // Initial load
            useEffect(() => {
                loadFromFirebase();
            }, []);

            // Auto-save to Firebase when tasks change
            useEffect(() => {
                if (isLoading) return; // Don't save during initial load
                
                const timeoutId = setTimeout(() => {
                    saveToFirebase(tasks, nextId);
                }, 500); // Debounce saves by 500ms

                return () => clearTimeout(timeoutId);
            }, [tasks, nextId, isLoading]);

            // ==================== PWA SETUP ====================
            
            useEffect(() => {
                if (window.matchMedia('(display-mode: standalone)').matches) {
                    setIsInstalled(true);
                }
            }, []);

            useEffect(() => {
                const handler = (e) => {
                    e.preventDefault();
                    setInstallPrompt(e);
                };
                window.addEventListener('beforeinstallprompt', handler);
                return () => window.removeEventListener('beforeinstallprompt', handler);
            }, []);

            const handleInstall = async () => {
                if (!installPrompt) return;
                installPrompt.prompt();
                const { outcome } = await installPrompt.userChoice;
                if (outcome === 'accepted') {
                    setInstallPrompt(null);
                }
            };

            // ==================== TASK FUNCTIONS ====================

            const calculateTotalTime = (task) => {
                if (!task || typeof task !== 'object') {
                    return 0;
                }
                
                const taskTime = typeof task.timeMinutes === 'number' ? task.timeMinutes : 0;
                
                if (!task.children || !Array.isArray(task.children) || task.children.length === 0) {
                    return taskTime;
                }
                
                const childrenTime = task.children.reduce((sum, child) => {
                    return sum + calculateTotalTime(child);
                }, 0);
                
                return taskTime + childrenTime;
            };

            const formatTime = (minutes) => {
                if (minutes === 0) return '0m';
                const hours = Math.floor(minutes / 60);
                const mins = minutes % 60;
                if (hours === 0) return `${mins}m`;
                if (mins === 0) return `${hours}h`;
                return `${hours}h ${mins}m`;
            };

            const addTask = (parentTask = null) => {
                if (parentTask && (!parentTask.children || !Array.isArray(parentTask.children))) {
                    console.error('Parent task has invalid children structure');
                    return;
                }

                const newTask = {
                    id: nextId,
                    text: 'New task',
                    timeMinutes: 0,
                    level: parentTask ? parentTask.level + 1 : 0,
                    collapsed: false,
                    children: []
                };
                
                setNextId(prev => prev + 1);

                if (parentTask) {
                    setTasks(prevTasks => {
                        const updated = updateTaskRecursive(prevTasks, parentTask.id, (task) => ({
                            ...task,
                            children: [...(task.children || []), newTask]
                        }));
                        return updated;
                    });
                } else {
                    setTasks(prevTasks => [...prevTasks, newTask]);
                }
            };

            const updateTaskRecursive = (taskArray, taskId, updateFn) => {
                if (!Array.isArray(taskArray)) {
                    return [];
                }
                
                return taskArray.map(task => {
                    if (!task || typeof task !== 'object') {
                        return task;
                    }
                    
                    if (task.id === taskId) {
                        return updateFn(task);
                    }
                    
                    if (task.children && Array.isArray(task.children) && task.children.length > 0) {
                        return {
                            ...task,
                            children: updateTaskRecursive(task.children, taskId, updateFn)
                        };
                    }
                    
                    return task;
                });
            };

            const deleteTaskRecursive = (taskArray, taskId) => {
                if (!Array.isArray(taskArray)) {
                    return [];
                }
                
                return taskArray.filter(task => task && task.id !== taskId).map(task => {
                    if (!task || typeof task !== 'object') {
                        return task;
                    }
                    
                    return {
                        ...task,
                        children: task.children && Array.isArray(task.children) && task.children.length > 0
                            ? deleteTaskRecursive(task.children, taskId)
                            : []
                    };
                });
            };

            const deleteTask = (taskId) => {
                setTasks(prevTasks => deleteTaskRecursive(prevTasks, taskId));
            };

            const updateTaskText = (taskId, newText) => {
                setTasks(prevTasks => updateTaskRecursive(prevTasks, taskId, (task) => ({
                    ...task,
                    text: newText
                })));
            };

            const updateTaskTime = (taskId, minutes) => {
                setTasks(prevTasks => updateTaskRecursive(prevTasks, taskId, (task) => ({
                    ...task,
                    timeMinutes: Math.max(0, parseInt(minutes) || 0)
                })));
            };

            const toggleCollapse = (taskId) => {
                setTasks(prevTasks => updateTaskRecursive(prevTasks, taskId, (task) => ({
                    ...task,
                    collapsed: !task.collapsed
                })));
            };

            const clearAllData = async () => {
                if (confirm('Are you sure you want to delete all tasks? This cannot be undone.')) {
                    setTasks([]);
                    setNextId(1);
                    if (database) {
                        await saveToFirebase([], 1);
                    }
                }
            };

            // ==================== RENDER FUNCTIONS ====================

            const renderTask = (task, depth = 0) => {
                if (!task || typeof task !== 'object' || typeof task.id === 'undefined') {
                    return null;
                }
                
                const totalTime = calculateTotalTime(task);
                const hasChildren = task.children && Array.isArray(task.children) && task.children.length > 0;
                const indent = depth * 24;

                return (
                    <div key={task.id} className="mb-1">
                        <div 
                            className="flex items-center gap-2 py-2 px-3 hover:bg-gray-50 rounded group"
                            style={{ marginLeft: `${indent}px` }}
                        >
                            <button
                                onClick={() => toggleCollapse(task.id)}
                                className="w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600"
                                disabled={!hasChildren}
                            >
                                {hasChildren ? (
                                    task.collapsed ? <ChevronRight size={16} /> : <ChevronDown size={16} />
                                ) : (
                                    <div className="w-4 h-4" />
                                )}
                            </button>

                            <input
                                type="text"
                                value={task.text}
                                onChange={(e) => updateTaskText(task.id, e.target.value)}
                                className="flex-1 px-2 py-1 border border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none rounded"
                            />

                            <div className="flex items-center gap-1">
                                <Clock size={14} className="text-gray-400" />
                                <input
                                    type="number"
                                    value={task.timeMinutes}
                                    onChange={(e) => updateTaskTime(task.id, e.target.value)}
                                    className="w-16 px-2 py-1 border border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:outline-none rounded text-sm"
                                    min="0"
                                    placeholder="0"
                                />
                                <span className="text-sm text-gray-500">m</span>
                            </div>

                            {hasChildren && (
                                <div className="px-2 py-1 bg-blue-50 text-blue-700 rounded text-sm font-medium">
                                    Total: {formatTime(totalTime)}
                                </div>
                            )}

                            <div className="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button
                                    onClick={() => addTask(task)}
                                    className="p-1 hover:bg-blue-100 text-blue-600 rounded"
                                    title="Add subtask"
                                    disabled={depth >= 5}
                                >
                                    <Plus size={16} />
                                </button>
                                <button
                                    onClick={() => deleteTask(task.id)}
                                    className="p-1 hover:bg-red-100 text-red-600 rounded"
                                    title="Delete task"
                                >
                                    <Trash2 size={16} />
                                </button>
                            </div>
                        </div>

                        {hasChildren && !task.collapsed && depth < 10 && (
                            <div>
                                {task.children
                                    .filter(child => child && typeof child === 'object' && typeof child.id !== 'undefined')
                                    .map(child => renderTask(child, depth + 1))}
                            </div>
                        )}
                    </div>
                );
            };

            const totalProjectTime = Array.isArray(tasks) 
                ? tasks.reduce((sum, task) => sum + calculateTotalTime(task), 0)
                : 0;

            // Sync status badge
            const SyncBadge = () => {
                if (!isFirebaseConfigured) {
                    return (
                        <div className="flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">
                            <CloudOff size={16} />
                            <span>Offline Mode</span>
                        </div>
                    );
                }

                switch(syncStatus) {
                    case 'syncing':
                        return (
                            <div className="flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                <Cloud size={16} className="animate-pulse" />
                                <span>Syncing...</span>
                            </div>
                        );
                    case 'synced':
                        return (
                            <div className="flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">
                                <Cloud size={16} />
                                <span>Synced</span>
                            </div>
                        );
                    case 'error':
                        return (
                            <div className="flex items-center gap-2 px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">
                                <CloudOff size={16} />
                                <span>Sync Error</span>
                            </div>
                        );
                    default:
                        return (
                            <div className="flex items-center gap-2 px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">
                                <CloudOff size={16} />
                                <span>Offline</span>
                            </div>
                        );
                }
            };

            if (isLoading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center">
                        <div className="text-center">
                            <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"></div>
                            <p className="text-gray-600">Loading your tasks...</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6">
                    {saveNotification && (
                        <div className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-fade-in z-50">
                            <Save size={16} />
                            <span>Saved!</span>
                        </div>
                    )}

                    {!isFirebaseConfigured && (
                        <div className="fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-orange-500 text-white p-4 rounded-lg shadow-lg z-50">
                            <p className="font-semibold">‚ö†Ô∏è Firebase Not Configured</p>
                            <p className="text-sm mt-1">Add your Firebase config to enable cross-device sync</p>
                        </div>
                    )}

                    {installPrompt && !isInstalled && (
                        <div className="fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-blue-600 text-white p-4 rounded-lg shadow-2xl flex items-center gap-3 z-50 animate-slide-up">
                            <Download size={24} />
                            <div className="flex-1">
                                <div className="font-semibold">Install Task Manager</div>
                                <div className="text-sm text-blue-100">Add to your home screen</div>
                            </div>
                            <button
                                onClick={handleInstall}
                                className="px-4 py-2 bg-white text-blue-600 rounded font-semibold hover:bg-blue-50 transition-colors"
                            >
                                Install
                            </button>
                            <button
                                onClick={() => setInstallPrompt(null)}
                                className="text-blue-100 hover:text-white"
                            >
                                ‚úï
                            </button>
                        </div>
                    )}

                    {isInstalled && (
                        <div className="fixed top-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium z-50">
                            üì± Installed
                        </div>
                    )}

                    <div className="max-w-5xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="flex items-center justify-between mb-4 flex-wrap gap-4">
                                <div className="flex-1">
                                    <h1 className="text-3xl font-bold text-gray-900">Hierarchical Task Manager</h1>
                                    <p className="text-gray-600 mt-1">Cross-device sync with Firebase</p>
                                </div>
                                <div className="flex items-center gap-4">
                                    <SyncBadge />
                                    <div className="text-right">
                                        <div className="text-sm text-gray-500">Total Time</div>
                                        <div className="text-3xl font-bold text-blue-600">{formatTime(totalProjectTime)}</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex gap-2 flex-wrap">
                                <button
                                    onClick={() => addTask()}
                                    className="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"
                                >
                                    <Plus size={20} />
                                    Add Task
                                </button>
                                
                                <button
                                    onClick={clearAllData}
                                    className="flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"
                                >
                                    <Trash2 size={20} />
                                    Clear All
                                </button>

                                {installPrompt && !isInstalled && (
                                    <button
                                        onClick={handleInstall}
                                        className="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"
                                    >
                                        <Download size={20} />
                                        Install App
                                    </button>
                                )}
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-lg p-4">
                            {tasks.length === 0 ? (
                                <div className="text-center py-12 text-gray-400">
                                    <p className="text-lg">No tasks yet. Create your first task!</p>
                                </div>
                            ) : (
                                <div>
                                    {tasks
                                        .filter(task => task && typeof task === 'object' && typeof task.id !== 'undefined')
                                        .map(task => renderTask(task, 0))}
                                </div>
                            )}
                        </div>

                        <div className="mt-6 bg-white rounded-lg shadow p-4 text-sm text-gray-600">
                            <h3 className="font-semibold text-gray-900 mb-2">‚ú® Features:</h3>
                            <ul className="space-y-1 list-disc list-inside">
                                <li>üì± Works across all your devices automatically</li>
                                <li>üîÑ Real-time sync - changes appear instantly everywhere</li>
                                <li>üìä Up to 5 levels of task nesting</li>
                                <li>‚è±Ô∏è Automatic time tracking and rollup</li>
                                <li>üíæ Cloud backup with Firebase</li>
                                <li>üåê Install as PWA for app-like experience</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HierarchicalTaskManager />);
    </script>

    <script>
        // Service worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'task-manager-v1';
                    self.addEventListener('install', (event) => {
                        event.waitUntil(caches.open(CACHE_NAME));
                    });
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => response || fetch(event.request))
                        );
                    });
                `;
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                navigator.serviceWorker.register(swUrl);
            });
        }

        // Create manifest
        const manifest = {
            name: "Hierarchical Task Manager",
            short_name: "Tasks",
            description: "Task manager with cross-device sync",
            start_url: window.location.pathname || "/",
            display: "standalone",
            background_color: "#ffffff",
            theme_color: "#2563eb",
            icons: [
                {
                    src: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%232563eb' width='192' height='192' rx='40'/><path d='M60 100 L85 125 L135 75' stroke='white' stroke-width='12' fill='none' stroke-linecap='round' stroke-linejoin='round'/></svg>",
                    sizes: "192x192",
                    type: "image/svg+xml"
                }
            ]
        };
        const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(manifestBlob);
        document.getElementById('manifest-placeholder').setAttribute('href', manifestURL);
    </script>

    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slide-up 0.4s ease-out;
        }
    </style>
</body>
</html>
